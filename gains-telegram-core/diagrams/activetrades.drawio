<mxfile host="Electron" modified="2023-10-01T07:07:51.405Z" agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/22.0.0 Chrome/114.0.5735.289 Electron/25.8.3 Safari/537.36" etag="u9Imlwa1M55aUS2li0lX" version="22.0.0" type="device">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
    <mxGraphModel dx="1228" dy="2154" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="sEur0S1V_NrFXX612Y2V-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-0" target="sEur0S1V_NrFXX612Y2V-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-0" target="sEur0S1V_NrFXX612Y2V-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-0" value="ActiveTrades" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="460" y="10" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-1" target="sEur0S1V_NrFXX612Y2V-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-1" value="OpenPositions" style="whiteSpace=wrap;html=1;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="220" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="740" y="-40" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-3" value="OpenLimitOrders" style="whiteSpace=wrap;html=1;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="680" y="10" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-5" target="sEur0S1V_NrFXX612Y2V-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-5" target="sEur0S1V_NrFXX612Y2V-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-5" value="Has rdb OpenPos" style="rhombus;whiteSpace=wrap;html=1;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="235" y="180" width="90" height="90" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-7" value="Stringbuilder(false)" style="whiteSpace=wrap;html=1;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="50" y="550" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-9" value="No" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="160" y="195" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-10" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="280" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-10" value="Retrieve rdb Open Positions and assign to []" style="whiteSpace=wrap;html=1;strokeWidth=2;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="210" y="310" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-12" value="Yes" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="240" y="270" width="40" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-18" target="sEur0S1V_NrFXX612Y2V-32" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="440" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-18" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="280" y="550" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-18" value="... exists in 37. openTrades" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="220" y="420" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-19" value="&lt;p style=&quot;line-height: 100%;&quot;&gt;&lt;/p&gt;&lt;h1&gt;Contracts&lt;/h1&gt;&lt;p&gt;-&amp;nbsp;gfarmTradingStorageV5&lt;/p&gt;&lt;div style=&quot;color: rgb(234, 242, 241); background-color: rgb(40, 42, 58); font-family: &amp;quot;Droid Sans Mono&amp;quot;, &amp;quot;monospace&amp;quot;, monospace; line-height: 46%;&quot;&gt;&lt;font style=&quot;font-size: 7px;&quot;&gt;0xcFa6ebD475d89dB04cAd5A756fff1cb2BC5bE33c&lt;/font&gt;&lt;/div&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry width="190" height="120" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-23" value="Pop trade from Redis / Change OrderType / Pass to auditingService" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="360" y="470" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-28" value="Stringbuilder(trades)" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="220" y="550" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-30" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1040" y="80" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-30" target="sEur0S1V_NrFXX612Y2V-38" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1220" y="-80" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-30" value="RustyAPI" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-28" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="500" y="500" as="targetPoint" />
            <mxPoint x="350" y="580" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="1050" y="580" />
              <mxPoint x="1050" y="140" />
              <mxPoint x="1051" y="140" />
              <mxPoint x="1051" y="500" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-32" value="/opentradesexists" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="980" y="90" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-34" value="False" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="680" y="470" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-36" value="True" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="680" y="550" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-38" value="OrderTradesWarden" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1160" y="-160" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-39" value="&lt;h1&gt;OrderTradesWarden&lt;/h1&gt;&lt;p&gt;The OrderTradesWarden uses a multi-call contract to constantly keep in Redis an array containing all addresses that are currently &lt;i&gt;Trading&lt;/i&gt;&amp;nbsp;meaning that they have:&amp;nbsp;&lt;/p&gt;&lt;p&gt;- An open position AND / OR an open order&lt;/p&gt;&lt;p&gt;It also has keeps track of&amp;nbsp;&lt;/p&gt;&lt;p&gt;13. getOpenLimitOrders (which shows all open limit orders and checks for changes every single block.&amp;nbsp;&lt;/p&gt;&lt;p&gt;If there is a change in the OpenLimitOrders it will also signal a different microservice that changes the ORDER_STATUS on the Redis database.&amp;nbsp;&lt;/p&gt;&lt;p&gt;More Ideas:&amp;nbsp;&lt;/p&gt;&lt;p&gt;- This service also handles the closing of positions, corroborates it with the event log on the closePosition Tx and then stores it in MongoDB for the respective user after which he can view those orders in his wallet panel.&lt;/p&gt;&lt;p&gt;The blockchain ALWAYS overrules our internal datakeeping.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1320" y="-480" width="270" height="480" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-46" target="sEur0S1V_NrFXX612Y2V-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-50" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-46" target="sEur0S1V_NrFXX612Y2V-55" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="740" y="-270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-51" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-46" target="sEur0S1V_NrFXX612Y2V-52" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="520" y="-320" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-46" value="hasOpenLimitOrder" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="652" y="-190" width="178" height="150" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-60" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-52" target="sEur0S1V_NrFXX612Y2V-59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-52" value="EmptyArray" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="440" y="-340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-53" value="True&lt;br&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="745" y="-240" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-54" value="False" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="500" y="-225" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-58" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-55" target="sEur0S1V_NrFXX612Y2V-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="sEur0S1V_NrFXX612Y2V-55" target="sEur0S1V_NrFXX612Y2V-59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-55" value="retrieveLimitOrders()" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="680" y="-340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sEur0S1V_NrFXX612Y2V-59" value="buildLimitString()" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="560" y="-460" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="ScWWPNMiOQR-LAkDKdBM-2" value="&lt;h1&gt;rdbOpen&lt;/h1&gt;&lt;p&gt;Assign to array and sort this array based on the timestamp of the trade where T min is index 0.&amp;nbsp;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="350" y="290" width="190" height="100" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
